<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>long time to see</title>
    <link rel="stylesheet" href="fullcalendar.css"/>
    <link rel="stylesheet" href="fullcalendar.print.css" media="print"/>
    <script src="lib/jquery.min.js"></script>
    <script src="lib/moment.min.js"></script>
    <script src="fullcalendar.js"></script>
    <script src="form.js"></script>
    <script>
        var selfDebug = false;

        var savedEvents = (function () {
            var savedEvents = new Array();

            if(selfDebug){
                savedEvents = {
                    url: 'events.json'
                }
            }
            else {
                var work = 0;

                while (savedEvents.length === 0) {
                    var savedEvents = LoadCalendar();
                    work++;
                    if (work == 30) {
                        //alert('캘린더 로드 성공');
                        break;
                    }
                }

            }
            console.log(savedEvents);
            return savedEvents;
        }());

        $(document).ready(function () {


            $('#calendar').fullCalendar({
                customButtons: {
                    addScheduleButton: {
                        text: 'add schedule',
                        click: function () {
                            window.location.href = "addSchedule.html";
                        }
                    }
                },
                header: {
                    left: 'prev,next addScheduleButton',
                    center: 'title',
                },

                editable: false,
                eventLimit: true,
                events: savedEvents,

                eventClick: function (calEvent) {
                    console.log(calEvent);
                    var dummy_json = {title: calEvent.title, start: calEvent.start, end: calEvent.end, info: calEvent.info};
                    window.location.href = "updateSchedule.html?Events="+JSON.stringify(dummy_json);
                }
            });

        });
    </script>
    <style>

        body {
            margin: 40px 10px;
            padding: 0;
            font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;
            font-size: 14px;
        }

        #calendar {
            max-width: 900px;
            margin: 0 auto;
        }

    </style>
</head>
<body>
    <div id="calendar"></div>
</body>
</html>